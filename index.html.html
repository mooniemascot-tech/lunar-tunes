<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lunar Tunes | Admin-Controlled Music Platform</title>
    <meta name="description" content="A secure, admin-controlled music streaming platform. Only authorized administrators can upload and customize content.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- WaveSurfer.js -->
    <script src="https://unpkg.com/wavesurfer.js@7"></script>
    
    <style>
        :root {
            /* Default theme - Admin can customize all of these */
            --bg-primary: #0a0b14;
            --bg-secondary: #05060c;
            --panel-primary: #151825;
            --panel-secondary: #1e2238;
            --text-primary: #f0f2ff;
            --text-secondary: #a0a6cc;
            --accent-primary: #8a7dff;
            --accent-secondary: #5d8aff;
            --accent-tertiary: #ff7dca;
            --border-color: rgba(255, 255, 255, 0.08);
            --border-radius: 16px;
            --transition-speed: 0.3s;
            --font-primary: 'Inter', sans-serif;
            --font-heading: 'Space Grotesk', sans-serif;
            --sidebar-bg: rgba(21, 24, 37, 0.95);
            --song-item-bg: rgba(255, 255, 255, 0.03);
            --player-bg: rgba(30, 34, 56, 0.8);
            --logo-gradient: linear-gradient(to right, #8a7dff, #5d8aff);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-primary);
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            background-attachment: fixed;
            transition: var(--transition-speed);
        }
        
        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.1;
            z-index: -1;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            padding: 25px 0;
            position: sticky;
            top: 0;
            background: rgba(10, 11, 20, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition-speed);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--logo-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            transition: var(--transition-speed);
        }
        
        .logo-text h1 {
            font-family: var(--font-heading);
            font-size: 26px;
            font-weight: 700;
            background: var(--logo-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 4px;
            transition: var(--transition-speed);
        }
        
        .logo-text p {
            font-size: 13px;
            color: var(--text-secondary);
            letter-spacing: 0.5px;
            transition: var(--transition-speed);
        }
        
        /* Admin Controls */
        .admin-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .admin-toggle {
            background: var(--logo-gradient);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(138, 125, 255, 0.2);
        }
        
        .admin-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(138, 125, 255, 0.3);
        }
        
        .admin-toggle.active {
            background: linear-gradient(to right, #4CAF50, #45a049);
        }
        
        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            padding: 40px 0;
            min-height: calc(100vh - 140px);
        }
        
        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
            position: sticky;
            top: 120px;
            height: fit-content;
        }
        
        /* Content Area */
        .content-area {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 25px;
        }
        
        /* Player Section */
        .player-section {
            grid-column: 1;
        }
        
        /* Lyrics Section */
        .lyrics-section {
            grid-column: 1;
        }
        
        /* Right Panel */
        .right-panel {
            grid-column: 2;
            grid-row: 1 / span 2;
            display: flex;
            flex-direction: column;
            gap: 25px;
            position: sticky;
            top: 120px;
            height: fit-content;
        }
        
        /* Cards */
        .card {
            background: var(--panel-primary);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 25px;
            margin-bottom: 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: var(--transition-speed);
        }
        
        .card-title {
            font-family: var(--font-heading);
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-primary);
            transition: var(--transition-speed);
        }
        
        .card-title i {
            color: var(--accent-primary);
        }
        
        /* Upload Section (Admin Only) */
        .upload-section {
            position: relative;
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 30px 20px;
            text-align: center;
            transition: var(--transition-speed);
            background: rgba(30, 34, 56, 0.3);
            display: none;
        }
        
        .upload-section.active {
            display: block;
        }
        
        .upload-section:hover {
            border-color: var(--accent-primary);
            background: rgba(138, 125, 255, 0.05);
        }
        
        /* Admin Customization Panel */
        .customization-panel {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 450px;
            height: 100vh;
            background: var(--panel-primary);
            z-index: 2000;
            overflow-y: auto;
            padding: 30px;
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.3);
            border-left: 1px solid var(--border-color);
        }
        
        .customization-panel.active {
            display: block;
            animation: slideInRight 0.3s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .customization-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .customization-header h2 {
            font-family: var(--font-heading);
            font-size: 24px;
            background: var(--logo-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .close-customization {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            transition: var(--transition-speed);
        }
        
        .close-customization:hover {
            color: var(--accent-primary);
        }
        
        .customization-group {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }
        
        .customization-group h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .customization-group h3 i {
            color: var(--accent-primary);
        }
        
        .customization-control {
            margin-bottom: 15px;
        }
        
        .customization-control label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }
        
        .customization-control input[type="color"] {
            width: 100%;
            height: 40px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: transparent;
            cursor: pointer;
        }
        
        .customization-control input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
        }
        
        .customization-control select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-size: 14px;
        }
        
        .customization-control input[type="text"],
        .customization-control input[type="url"],
        .customization-control input[type="number"] {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-size: 14px;
        }
        
        .customization-control textarea {
            width: 100%;
            height: 100px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-size: 14px;
            resize: vertical;
        }
        
        .range-value {
            display: inline-block;
            margin-left: 10px;
            color: var(--accent-primary);
            font-weight: 600;
        }
        
        .color-preview {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }
        
        .color-box {
            width: 25px;
            height: 25px;
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }
        
        .customization-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }
        
        .customization-btn {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-speed);
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .customization-btn.save {
            background: var(--accent-primary);
            color: white;
        }
        
        .customization-btn.reset {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }
        
        .customization-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .preset-themes {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .theme-preset {
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition-speed);
            text-align: center;
            font-size: 12px;
        }
        
        .theme-preset:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }
        
        /* Non-admin view */
        .non-admin-view {
            text-align: center;
            padding: 30px 20px;
        }
        
        .non-admin-view i {
            font-size: 60px;
            color: var(--accent-secondary);
            margin-bottom: 20px;
            display: block;
        }
        
        .non-admin-view h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .non-admin-view p {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        /* Song List */
        .song-list-container {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .song-list {
            flex: 1;
            overflow-y: auto;
            max-height: 500px;
        }
        
        .song-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 12px;
            background: var(--song-item-bg);
            margin-bottom: 10px;
            transition: var(--transition-speed);
            cursor: pointer;
            border: 1px solid transparent;
            user-select: none;
        }
        
        .song-item:hover {
            background: rgba(138, 125, 255, 0.1);
            border-color: rgba(138, 125, 255, 0.3);
        }
        
        .song-item.active {
            background: rgba(138, 125, 255, 0.15);
            border-color: var(--accent-primary);
        }
        
        .song-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-secondary), var(--accent-tertiary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .song-info {
            flex-grow: 1;
            min-width: 0;
        }
        
        .song-info h4 {
            font-size: 16px;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .song-info p {
            font-size: 14px;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .song-actions {
            display: flex;
            gap: 10px;
            margin-left: 10px;
        }
        
        .favorite-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition-speed);
            padding: 5px;
        }
        
        .favorite-btn:hover {
            color: var(--accent-tertiary);
        }
        
        .favorite-btn.active {
            color: var(--accent-tertiary);
        }
        
        .song-date {
            font-size: 12px;
            color: var(--text-secondary);
            white-space: nowrap;
            margin-left: 10px;
        }
        
        /* Player Section */
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .player-header h2 {
            font-family: var(--font-heading);
            font-size: 28px;
            color: var(--text-primary);
        }
        
        .now-playing {
            background: var(--accent-primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .waveform-container {
            background: var(--player-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 25px;
        }
        
        #waveform {
            height: 150px;
        }
        
        .player-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 25px;
        }
        
        .control-buttons {
            display: flex;
            gap: 15px;
        }
        
        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--panel-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            font-size: 18px;
            cursor: pointer;
            transition: var(--transition-speed);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .control-btn:hover {
            background: var(--accent-primary);
            transform: translateY(-3px);
        }
        
        .play-btn {
            width: 70px;
            height: 70px;
            background: var(--logo-gradient);
            font-size: 24px;
        }
        
        .time-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* Song Details */
        .song-details {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .song-cover {
            width: 120px;
            height: 120px;
            border-radius: var(--border-radius);
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-tertiary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            flex-shrink: 0;
        }
        
        .song-meta h3 {
            font-size: 24px;
            margin-bottom: 10px;
            font-family: var(--font-heading);
        }
        
        .song-meta p {
            color: var(--text-secondary);
            margin-bottom: 15px;
        }
        
        .song-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .song-tag {
            background: rgba(138, 125, 255, 0.1);
            color: var(--accent-primary);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Lyrics Section */
        .lyrics-container {
            max-height: 300px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            line-height: 1.8;
            white-space: pre-line;
            color: var(--text-primary);
        }
        
        .lyrics-input {
            width: 100%;
            height: 200px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            resize: vertical;
        }
        
        /* Recent Plays */
        .recent-play-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.03);
            margin-bottom: 10px;
            transition: var(--transition-speed);
            cursor: pointer;
        }
        
        .recent-play-item:hover {
            background: rgba(138, 125, 255, 0.1);
        }
        
        .recent-play-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-secondary), var(--accent-tertiary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            margin-right: 12px;
        }
        
        .recent-play-info h4 {
            font-size: 14px;
            margin-bottom: 3px;
        }
        
        .recent-play-info p {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .recent-play-time {
            font-size: 11px;
            color: var(--text-secondary);
            margin-left: auto;
            white-space: nowrap;
        }
        
        /* About Section */
        .about-section p {
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .moonie-quote {
            background: rgba(138, 125, 255, 0.1);
            border-left: 4px solid var(--accent-primary);
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 25px 0;
            font-style: italic;
        }
        
        /* Footer */
        footer {
            padding: 30px 0;
            border-top: 1px solid var(--border-color);
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
            transition: var(--transition-speed);
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 15px;
        }
        
        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition-speed);
        }
        
        .footer-links a:hover {
            color: var(--accent-primary);
        }
        
        /* Hidden elements */
        .hidden {
            display: none !important;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .content-area {
                grid-template-columns: 1fr;
            }
            
            .right-panel {
                grid-column: 1;
                grid-row: auto;
            }
            
            .customization-panel {
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .admin-controls {
                width: 100%;
                justify-content: center;
            }
            
            .song-details {
                flex-direction: column;
                text-align: center;
            }
            
            .player-controls {
                flex-direction: column;
                gap: 20px;
            }
            
            .control-buttons {
                width: 100%;
                justify-content: center;
            }
            
            .preset-themes {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .floating {
            animation: float 5s ease-in-out infinite;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 10px;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(to right, var(--accent-primary), var(--accent-secondary));
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 3000;
            font-weight: 600;
            transform: translateX(100%);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            max-width: 350px;
        }
        
        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .notification.error {
            background: linear-gradient(to right, #ff4757, #ff3838);
        }
        
        .notification.success {
            background: linear-gradient(to right, #2ecc71, #27ae60);
        }
        
        .notification.warning {
            background: linear-gradient(to right, #ff9f43, #ff7f00);
        }
        
        /* Auth Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 4000;
            backdrop-filter: blur(8px);
        }
        
        .auth-modal.hidden {
            display: none;
        }
        
        .auth-modal-content {
            background: var(--panel-primary);
            padding: 40px;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
        }
        
        .auth-modal h2 {
            font-family: var(--font-heading);
            margin-bottom: 20px;
            background: var(--logo-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 28px;
        }
        
        .auth-modal p {
            color: var(--text-secondary);
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 14px;
        }
        
        .auth-modal .step-info {
            font-size: 12px;
            color: var(--accent-primary);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .auth-input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-size: 16px;
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: 2px;
        }
        
        .auth-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }
        
        .otp-inputs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .otp-input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
        }
        
        .otp-input:focus {
            border-color: var(--accent-primary);
            outline: none;
        }
        
        .phone-info {
            background: rgba(138, 125, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .phone-info i {
            color: var(--accent-primary);
            margin-right: 8px;
        }
        
        .timer {
            color: var(--accent-primary);
            font-weight: 600;
            margin-top: 10px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 14px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-speed);
            font-size: 14px;
        }
        
        .modal-btn.submit {
            background: var(--accent-primary);
            color: white;
        }
        
        .modal-btn.cancel {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }
        
        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .resend-otp {
            background: transparent;
            border: none;
            color: var(--accent-secondary);
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            padding: 5px;
        }
        
        .resend-otp:hover {
            text-decoration: underline;
        }
        
        .resend-otp.disabled {
            color: var(--text-secondary);
            cursor: not-allowed;
        }
        
        /* Admin Dashboard Stats */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* File Input Styles */
        .file-input-group {
            margin-bottom: 15px;
            text-align: left;
        }
        
        .file-input-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }
        
        .file-input {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-size: 14px;
        }
        
        .upload-btn {
            width: 100%;
            padding: 15px;
            background: var(--accent-primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-speed);
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(138, 125, 255, 0.3);
        }
        
        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Tab Navigation */
        .customization-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        .tab-btn {
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: var(--transition-speed);
        }
        
        .tab-btn.active {
            color: var(--accent-primary);
            border-bottom: 2px solid var(--accent-primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Background Overlay -->
    <div class="background-overlay" id="backgroundOverlay"></div>
    
    <!-- Auth Modal -->
    <div class="auth-modal hidden" id="authModal">
        <div class="auth-modal-content">
            <!-- Step 1: Password -->
            <div class="auth-step" id="passwordStep">
                <div class="step-info">Step 1 of 2</div>
                <h2><i class="fas fa-user-shield"></i> Admin Authentication</h2>
                <p>Enter your administrator password to proceed to two-factor verification.</p>
                
                <input type="password" class="auth-input" id="passwordInput" placeholder="Enter admin password" autocomplete="off">
                
                <div class="modal-buttons">
                    <button class="modal-btn cancel" id="cancelAuth">Cancel</button>
                    <button class="modal-btn submit" id="submitPassword">Verify Password</button>
                </div>
            </div>
            
            <!-- Step 2: OTP -->
            <div class="auth-step hidden" id="otpStep">
                <div class="step-info">Step 2 of 2</div>
                <h2><i class="fas fa-mobile-alt"></i> Two-Factor Verification</h2>
                <p>Enter the 6-digit verification code sent to your registered mobile number.</p>
                
                <div class="phone-info">
                    <i class="fas fa-phone"></i> OTP sent to: +91 ••••• •99461
                </div>
                
                <div class="otp-inputs">
                    <input type="text" class="otp-input" maxlength="1" data-index="0">
                    <input type="text" class="otp-input" maxlength="1" data-index="1">
                    <input type="text" class="otp-input" maxlength="1" data-index="2">
                    <input type="text" class="otp-input" maxlength="1" data-index="3">
                    <input type="text" class="otp-input" maxlength="1" data-index="4">
                    <input type="text" class="otp-input" maxlength="1" data-index="5">
                </div>
                
                <div class="timer" id="otpTimer">02:00</div>
                
                <button class="resend-otp disabled" id="resendOtp" disabled>Resend OTP in <span id="resendTimer">120</span>s</button>
                
                <div class="modal-buttons">
                    <button class="modal-btn cancel" id="backToPassword">Back</button>
                    <button class="modal-btn submit" id="submitOtp">Verify & Continue</button>
                </div>
            </div>
            
            <!-- Step 3: Loading -->
            <div class="auth-step hidden" id="loadingStep">
                <div class="spinner"></div>
                <h2>Authenticating...</h2>
                <p>Please wait while we verify your credentials.</p>
            </div>
        </div>
    </div>
    
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo" id="logo">
                    <div class="logo-icon floating">
                        <i class="fas fa-moon" id="logoIcon"></i>
                    </div>
                    <div class="logo-text">
                        <h1 id="siteTitle">Lunar Tunes</h1>
                        <p id="siteTagline">Professional Music Streaming Platform</p>
                    </div>
                </div>
                
                <div class="admin-controls">
                    <div class="admin-stats" id="adminStats" style="display: none;">
                        <div class="stat-card">
                            <div class="stat-number" id="songCount">0</div>
                            <div class="stat-label">Songs</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="playCount">0</div>
                            <div class="stat-label">Plays</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="adminTime">00:00</div>
                            <div class="stat-label">Session</div>
                        </div>
                    </div>
                    
                    <button class="admin-toggle" id="adminToggle">
                        <i class="fas fa-user-shield"></i> Admin Access
                    </button>
                    <button class="admin-toggle" id="customizeToggle" style="display: none;">
                        <i class="fas fa-palette"></i> Customize
                    </button>
                    <button class="admin-toggle" id="logoutBtn" style="display: none;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Customization Panel -->
    <div class="customization-panel" id="customizationPanel">
        <div class="customization-header">
            <h2><i class="fas fa-sliders-h"></i> Professional Customization</h2>
            <button class="close-customization" id="closeCustomization">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="customization-tabs">
            <button class="tab-btn active" data-tab="theme-tab"><i class="fas fa-palette"></i> Theme</button>
            <button class="tab-btn" data-tab="content-tab"><i class="fas fa-edit"></i> Content</button>
            <button class="tab-btn" data-tab="advanced-tab"><i class="fas fa-cogs"></i> Advanced</button>
        </div>
        
        <div class="customization-content">
            <!-- Theme Tab -->
            <div class="tab-content active" id="theme-tab">
                <div class="customization-group">
                    <h3><i class="fas fa-image"></i> Background & Visuals</h3>
                    <div class="customization-control">
                        <label for="bgImage">Background Image URL</label>
                        <input type="url" id="bgImage" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="customization-control">
                        <label for="bgOpacity">Background Opacity: <span class="range-value" id="bgOpacityValue">10%</span></label>
                        <input type="range" id="bgOpacity" min="0" max="100" value="10">
                    </div>
                    <div class="customization-control">
                        <label for="logoIconSelect">Logo Icon</label>
                        <select id="logoIconSelect">
                            <option value="fa-moon">Moon</option>
                            <option value="fa-music">Music</option>
                            <option value="fa-headphones">Headphones</option>
                            <option value="fa-record-vinyl">Vinyl</option>
                            <option value="fa-star">Star</option>
                            <option value="fa-satellite">Satellite</option>
                            <option value="fa-rocket">Rocket</option>
                            <option value="fa-galaxy">Galaxy</option>
                        </select>
                    </div>
                </div>
                
                <div class="customization-group">
                    <h3><i class="fas fa-paint-brush"></i> Color Scheme</h3>
                    <div class="customization-control">
                        <label for="primaryColor">Primary Accent Color</label>
                        <input type="color" id="primaryColor" value="#8a7dff">
                        <div class="color-preview">
                            <div class="color-box" style="background: #8a7dff;"></div>
                            <div class="color-box" style="background: #6b5eff;"></div>
                            <div class="color-box" style="background: #4a3fff;"></div>
                        </div>
                    </div>
                    <div class="customization-control">
                        <label for="secondaryColor">Secondary Accent Color</label>
                        <input type="color" id="secondaryColor" value="#5d8aff">
                    </div>
                    <div class="customization-control">
                        <label for="textPrimaryColor">Primary Text Color</label>
                        <input type="color" id="textPrimaryColor" value="#f0f2ff">
                    </div>
                    <div class="customization-control">
                        <label for="panelColor">Panel Background Color</label>
                        <input type="color" id="panelColor" value="#151825">
                    </div>
                </div>
                
                <div class="customization-group">
                    <h3><i class="fas fa-theater-masks"></i> Theme Presets</h3>
                    <div class="preset-themes">
                        <div class="theme-preset" data-preset="midnight">
                            <div style="background: #0a0b14; height: 20px; border-radius: 4px; margin-bottom: 5px;"></div>
                            Midnight
                        </div>
                        <div class="theme-preset" data-preset="ocean">
                            <div style="background: #0a1428; height: 20px; border-radius: 4px; margin-bottom: 5px;"></div>
                            Ocean
                        </div>
                        <div class="theme-preset" data-preset="forest">
                            <div style="background: #0a1c0a; height: 20px; border-radius: 4px; margin-bottom: 5px;"></div>
                            Forest
                        </div>
                        <div class="theme-preset" data-preset="sunset">
                            <div style="background: #1a0a14; height: 20px; border-radius: 4px; margin-bottom: 5px;"></div>
                            Sunset
                        </div>
                        <div class="theme-preset" data-preset="cyberpunk">
                            <div style="background: #1a0a28; height: 20px; border-radius: 4px; margin-bottom: 5px;"></div>
                            Cyberpunk
                        </div>
                        <div class="theme-preset" data-preset="monochrome">
                            <div style="background: #0a0a0a; height: 20px; border-radius: 4px; margin-bottom: 5px;"></div>
                            Monochrome
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Content Tab -->
            <div class="tab-content" id="content-tab">
                <div class="customization-group">
                    <h3><i class="fas fa-font"></i> Text & Branding</h3>
                    <div class="customization-control">
                        <label for="siteTitleInput">Site Title</label>
                        <input type="text" id="siteTitleInput" value="Lunar Tunes">
                    </div>
                    <div class="customization-control">
                        <label for="siteTaglineInput">Site Tagline</label>
                        <input type="text" id="siteTaglineInput" value="Professional Music Streaming Platform">
                    </div>
                    <div class="customization-control">
                        <label for="aboutText">About Section Text</label>
                        <textarea id="aboutText">Welcome to Lunar Tunes, a professional music streaming platform where authorized administrators can upload and customize content. Enjoy our curated collection of high-quality music across various genres.</textarea>
                    </div>
                    <div class="customization-control">
                        <label for="quoteText">Quote Text</label>
                        <input type="text" id="quoteText" value="Music is the moonlight in the cloudy night of life.">
                    </div>
                </div>
                
                <div class="customization-group">
                    <h3><i class="fas fa-cog"></i> Player Settings</h3>
                    <div class="customization-control">
                        <label for="defaultVolume">Default Volume: <span class="range-value" id="volumeValue">70%</span></label>
                        <input type="range" id="defaultVolume" min="0" max="100" value="70">
                    </div>
                    <div class="customization-control">
                        <label for="waveformColor">Waveform Color</label>
                        <input type="color" id="waveformColor" value="#8a7dff">
                    </div>
                </div>
            </div>
            
            <!-- Advanced Tab -->
            <div class="tab-content" id="advanced-tab">
                <div class="customization-group">
                    <h3><i class="fas fa-shield-alt"></i> Security Settings</h3>
                    <div class="customization-control">
                        <label for="sessionTimeout">Session Timeout (minutes)</label>
                        <input type="number" id="sessionTimeout" min="5" max="240" value="30">
                    </div>
                    <div class="customization-control">
                        <label for="autoLogout">Auto Logout on Inactivity</label>
                        <select id="autoLogout">
                            <option value="true">Enabled</option>
                            <option value="false">Disabled</option>
                        </select>
                    </div>
                </div>
                
                <div class="customization-group">
                    <h3><i class="fas fa-database"></i> Data Management</h3>
                    <div class="customization-control">
                        <label for="backupFrequency">Auto-backup Frequency</label>
                        <select id="backupFrequency">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="never">Never</option>
                        </select>
                    </div>
                    <div class="customization-control">
                        <button class="customization-btn reset" id="exportData">
                            <i class="fas fa-download"></i> Export All Data
                        </button>
                    </div>
                    <div class="customization-control">
                        <button class="customization-btn reset" id="clearCache">
                            <i class="fas fa-trash-alt"></i> Clear Cache
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="customization-actions">
                <button class="customization-btn reset" id="resetCustomization">
                    <i class="fas fa-undo"></i> Reset to Default
                </button>
                <button class="customization-btn save" id="saveCustomization">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="container">
        <div class="main-layout">
            <aside class="sidebar">
                <!-- Upload Section -->
                <div class="card">
                    <h2 class="card-title"><i class="fas fa-cloud-upload-alt"></i> Upload Management</h2>
                    
                    <!-- Admin Upload Form (Hidden by default) -->
                    <div class="upload-section" id="uploadSection">
                        <div class="upload-icon">
                            <i class="fas fa-file-audio floating"></i>
                        </div>
                        <div class="upload-text">
                            <h3>Professional Audio Upload</h3>
                            <p>Drag & drop or select audio files to upload to your library.</p>
                        </div>
                        
                        <form id="uploadForm">
                            <div class="file-input-group">
                                <label for="songFile"><i class="fas fa-music"></i> Audio File (MP3, WAV, FLAC, AAC)</label>
                                <input type="file" id="songFile" class="file-input" accept="audio/*" required>
                            </div>
                            
                            <div class="file-input-group">
                                <label for="songTitle"><i class="fas fa-heading"></i> Song Title *</label>
                                <input type="text" id="songTitle" class="file-input" placeholder="Enter song title" required>
                            </div>
                            
                            <div class="file-input-group">
                                <label for="songArtist"><i class="fas fa-user"></i> Artist *</label>
                                <input type="text" id="songArtist" class="file-input" placeholder="Enter artist name" required>
                            </div>
                            
                            <div class="file-input-group">
                                <label for="songAlbum"><i class="fas fa-compact-disc"></i> Album (Optional)</label>
                                <input type="text" id="songAlbum" class="file-input" placeholder="Enter album name">
                            </div>
                            
                            <div class="file-input-group">
                                <label for="songYear"><i class="fas fa-calendar-alt"></i> Release Year</label>
                                <input type="number" id="songYear" class="file-input" placeholder="2024" min="1900" max="2024">
                            </div>
                            
                            <div class="file-input-group">
                                <label for="songGenre"><i class="fas fa-tags"></i> Genre</label>
                                <select id="songGenre" class="file-input">
                                    <option value="">Select Genre</option>
                                    <option value="pop">Pop</option>
                                    <option value="rock">Rock</option>
                                    <option value="jazz">Jazz</option>
                                    <option value="classical">Classical</option>
                                    <option value="electronic">Electronic</option>
                                    <option value="hiphop">Hip Hop</option>
                                    <option value="rnb">R&B</option>
                                    <option value="country">Country</option>
                                    <option value="lofi">Lo-Fi</option>
                                    <option value="ambient">Ambient</option>
                                </select>
                            </div>
                            
                            <div class="file-input-group">
                                <label for="songDescription"><i class="fas fa-align-left"></i> Description</label>
                                <input type="text" id="songDescription" class="file-input" placeholder="Enter song description">
                            </div>
                            
                            <div class="file-input-group">
                                <label for="songLyrics"><i class="fas fa-file-alt"></i> Lyrics (Optional)</label>
                                <textarea id="songLyrics" class="lyrics-input" placeholder="Enter lyrics..."></textarea>
                            </div>
                            
                            <div class="file-input-group">
                                <label for="songCoverImage"><i class="fas fa-image"></i> Cover Image URL</label>
                                <input type="url" id="songCoverImage" class="file-input" placeholder="https://example.com/cover.jpg">
                            </div>
                            
                            <button type="submit" class="upload-btn" id="uploadBtn">
                                <i class="fas fa-cloud-upload-alt"></i> Upload Song
                            </button>
                        </form>
                    </div>
                    
                    <!-- Non-admin view -->
                    <div class="non-admin-view" id="nonAdminView">
                        <i class="fas fa-lock floating"></i>
                        <h3>Restricted Access</h3>
                        <p>This section is available only to authorized administrators. Please authenticate to access upload features.</p>
                    </div>
                </div>
                
                <!-- Song List -->
                <div class="card song-list-container">
                    <h2 class="card-title"><i class="fas fa-music"></i> Music Library</h2>
                    
                    <div class="song-list" id="songList">
                        <!-- Songs will be populated here -->
                        <div class="song-item">
                            <div class="song-icon">
                                <i class="fas fa-music"></i>
                            </div>
                            <div class="song-info">
                                <h4>No songs available</h4>
                                <p>Upload music to get started</p>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
            
            <div class="content-area">
                <!-- Player Section -->
                <div class="player-section">
                    <div class="player-header">
                        <h2>Now Playing</h2>
                        <div class="now-playing">OFFLINE</div>
                    </div>
                    
                    <div class="card">
                        <div class="song-details">
                            <div class="song-cover" id="songCover">
                                <i class="fas fa-music"></i>
                            </div>
                            <div class="song-meta">
                                <h3 id="currentSongTitle">Select a song to play</h3>
                                <p id="currentSongArtist">No artist</p>
                                <p id="currentSongDescription">No description available</p>
                                <div class="song-tags">
                                    <span class="song-tag" id="songGenreTag">Unknown</span>
                                    <span class="song-tag" id="songYearTag">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="waveform-container">
                            <div id="waveform"></div>
                            <div class="time-info">
                                <span id="currentTime">0:00</span>
                                <span id="totalTime">0:00</span>
                            </div>
                        </div>
                        
                        <div class="player-controls">
                            <div class="control-buttons">
                                <button class="control-btn" id="prevBtn" disabled>
                                    <i class="fas fa-step-backward"></i>
                                </button>
                                <button class="control-btn play-btn" id="playBtn" disabled>
                                    <i class="fas fa-play" id="playIcon"></i>
                                </button>
                                <button class="control-btn" id="nextBtn" disabled>
                                    <i class="fas fa-step-forward"></i>
                                </button>
                            </div>
                            
                            <div class="volume-control" style="display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-volume-up"></i>
                                <input type="range" id="volumeSlider" min="0" max="100" value="70" style="width: 100px;">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Lyrics Section -->
                <div class="lyrics-section">
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-file-alt"></i> Lyrics</h2>
                        <div class="lyrics-container" id="lyricsContainer">
                            Select a song to view lyrics...
                        </div>
                    </div>
                </div>
                
                <!-- Right Panel -->
                <div class="right-panel">
                    <!-- Recent Plays -->
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-history"></i> Recent Plays</h2>
                        <div id="recentPlays">
                            <div class="recent-play-item">
                                <div class="recent-play-icon">
                                    <i class="fas fa-history"></i>
                                </div>
                                <div class="recent-play-info">
                                    <h4>No recent plays</h4>
                                    <p>Play a song to see history</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- About Section -->
                    <div class="card">
                        <h2 class="card-title"><i class="fas fa-info-circle"></i> About This Platform</h2>
                        
                        <div class="about-section">
                            <p id="aboutContent">Welcome to Lunar Tunes, a professional music streaming platform where authorized administrators can upload and customize content. Enjoy our curated collection of high-quality music across various genres.</p>
                            
                            <div class="moonie-quote" id="quoteContent">
                                "Music is the moonlight in the cloudy night of life."
                            </div>
                            
                            <p>This platform features advanced security measures including two-factor authentication for administrators and comprehensive customization options.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>© <span id="currentYear"></span> <span id="footerSiteTitle">Lunar Tunes</span>. All rights reserved. <span id="adminStatus">[User Mode]</span></p>
            <div class="footer-links">
                <a href="#"><i class="fas fa-question-circle"></i> Help</a>
                <a href="#" id="privacyLink"><i class="fas fa-shield-alt"></i> Privacy</a>
                <a href="#" id="contactLink"><i class="fas fa-envelope"></i> Contact Admin</a>
            </div>
        </div>
    </footer>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <script>
        // ==================== CONSTANTS ====================
        const ADMIN_PASSWORD = "Nilabh@2004";
        const ADMIN_PHONE = "+91 9678799461";
        const SESSION_TIMEOUT = 30 * 60 * 1000; // 30 minutes
        const OTP_TIMEOUT = 2 * 60 * 1000; // 2 minutes for OTP
        const OTP_RESEND_DELAY = 30 * 1000; // 30 seconds
        
        // Theme Presets
        const THEME_PRESETS = {
            midnight: {
                bgPrimary: "#0a0b14",
                bgSecondary: "#05060c",
                panelPrimary: "#151825",
                accentPrimary: "#8a7dff",
                accentSecondary: "#5d8aff",
                textPrimary: "#f0f2ff"
            },
            ocean: {
                bgPrimary: "#0a1428",
                bgSecondary: "#050c1c",
                panelPrimary: "#152238",
                accentPrimary: "#5d8aff",
                accentSecondary: "#7dd3ff",
                textPrimary: "#f0f8ff"
            },
            forest: {
                bgPrimary: "#0a1c0a",
                bgSecondary: "#051205",
                panelPrimary: "#153815",
                accentPrimary: "#5dff8a",
                accentSecondary: "#7dffb0",
                textPrimary: "#f0fff2"
            },
            sunset: {
                bgPrimary: "#1a0a14",
                bgSecondary: "#0c0508",
                panelPrimary: "#381522",
                accentPrimary: "#ff7dca",
                accentSecondary: "#ff5d8a",
                textPrimary: "#fff0f8"
            },
            cyberpunk: {
                bgPrimary: "#1a0a28",
                bgSecondary: "#0c0514",
                panelPrimary: "#38153d",
                accentPrimary: "#ff5df2",
                accentSecondary: "#8a5dff",
                textPrimary: "#f8f0ff"
            },
            monochrome: {
                bgPrimary: "#0a0a0a",
                bgSecondary: "#050505",
                panelPrimary: "#1a1a1a",
                accentPrimary: "#ffffff",
                accentSecondary: "#cccccc",
                textPrimary: "#ffffff"
            }
        };
        
        const DEFAULT_THEME = {
            bgPrimary: "#0a0b14",
            bgSecondary: "#05060c",
            panelPrimary: "#151825",
            panelSecondary: "#1e2238",
            textPrimary: "#f0f2ff",
            textSecondary: "#a0a6cc",
            accentPrimary: "#8a7dff",
            accentSecondary: "#5d8aff",
            accentTertiary: "#ff7dca",
            borderRadius: "16px",
            fontPrimary: "'Inter', sans-serif",
            fontHeading: "'Space Grotesk', sans-serif",
            logoGradient: "linear-gradient(to right, #8a7dff, #5d8aff)",
            bgImage: "",
            bgOpacity: 10,
            logoIcon: "fa-moon",
            siteTitle: "Lunar Tunes",
            siteTagline: "Professional Music Streaming Platform",
            aboutText: "Welcome to Lunar Tunes, a professional music streaming platform where authorized administrators can upload and customize content. Enjoy our curated collection of high-quality music across various genres.",
            quoteText: "\"Music is the moonlight in the cloudy night of life.\"",
            defaultVolume: 70,
            sessionTimeout: 30,
            autoLogout: true,
            backupFrequency: "weekly"
        };
        
        // ==================== STATE VARIABLES ====================
        let wavesurfer = null;
        let currentSongIndex = -1;
        let songs = [];
        let isAdmin = false;
        let sessionTimer = null;
        let otpTimer = null;
        let resendTimer = null;
        let sessionStartTime = null;
        let sessionInterval = null;
        let currentTheme = {...DEFAULT_THEME};
        let generatedOTP = null;
        let otpExpiry = null;
        
        // ==================== DOM ELEMENTS ====================
        const elements = {
            // Core elements
            songList: document.getElementById('songList'),
            currentSongTitle: document.getElementById('currentSongTitle'),
            currentSongArtist: document.getElementById('currentSongArtist'),
            currentSongDescription: document.getElementById('currentSongDescription'),
            lyricsContainer: document.getElementById('lyricsContainer'),
            songCover: document.getElementById('songCover'),
            waveform: document.getElementById('waveform'),
            currentTime: document.getElementById('currentTime'),
            totalTime: document.getElementById('totalTime'),
            playBtn: document.getElementById('playBtn'),
            playIcon: document.getElementById('playIcon'),
            prevBtn: document.getElementById('prevBtn'),
            nextBtn: document.getElementById('nextBtn'),
            volumeSlider: document.getElementById('volumeSlider'),
            songGenreTag: document.getElementById('songGenreTag'),
            songYearTag: document.getElementById('songYearTag'),
            
            // Admin elements
            adminToggle: document.getElementById('adminToggle'),
            customizeToggle: document.getElementById('customizeToggle'),
            logoutBtn: document.getElementById('logoutBtn'),
            uploadSection: document.getElementById('uploadSection'),
            nonAdminView: document.getElementById('nonAdminView'),
            uploadForm: document.getElementById('uploadForm'),
            songFile: document.getElementById('songFile'),
            songTitle: document.getElementById('songTitle'),
            songArtist: document.getElementById('songArtist'),
            songAlbum: document.getElementById('songAlbum'),
            songYear: document.getElementById('songYear'),
            songGenre: document.getElementById('songGenre'),
            songDescription: document.getElementById('songDescription'),
            songLyrics: document.getElementById('songLyrics'),
            songCoverImage: document.getElementById('songCoverImage'),
            adminStats: document.getElementById('adminStats'),
            songCount: document.getElementById('songCount'),
            playCount: document.getElementById('playCount'),
            adminTime: document.getElementById('adminTime'),
            
            // Auth elements
            authModal: document.getElementById('authModal'),
            passwordStep: document.getElementById('passwordStep'),
            otpStep: document.getElementById('otpStep'),
            loadingStep: document.getElementById('loadingStep'),
            passwordInput: document.getElementById('passwordInput'),
            submitPassword: document.getElementById('submitPassword'),
            cancelAuth: document.getElementById('cancelAuth'),
            otpInputs: document.querySelectorAll('.otp-input'),
            submitOtp: document.getElementById('submitOtp'),
            backToPassword: document.getElementById('backToPassword'),
            otpTimer: document.getElementById('otpTimer'),
            resendOtp: document.getElementById('resendOtp'),
            resendTimer: document.getElementById('resendTimer'),
            
            // Customization elements
            customizationPanel: document.getElementById('customizationPanel'),
            closeCustomization: document.getElementById('closeCustomization'),
            tabBtns: document.querySelectorAll('.tab-btn'),
            tabContents: document.querySelectorAll('.tab-content'),
            
            // Theme elements
            bgImage: document.getElementById('bgImage'),
            bgOpacity: document.getElementById('bgOpacity'),
            bgOpacityValue: document.getElementById('bgOpacityValue'),
            logoIconSelect: document.getElementById('logoIconSelect'),
            primaryColor: document.getElementById('primaryColor'),
            secondaryColor: document.getElementById('secondaryColor'),
            textPrimaryColor: document.getElementById('textPrimaryColor'),
            panelColor: document.getElementById('panelColor'),
            defaultVolume: document.getElementById('defaultVolume'),
            volumeValue: document.getElementById('volumeValue'),
            waveformColor: document.getElementById('waveformColor'),
            themePresets: document.querySelectorAll('.theme-preset'),
            
            // Content elements
            siteTitleInput: document.getElementById('siteTitleInput'),
            siteTaglineInput: document.getElementById('siteTaglineInput'),
            aboutText: document.getElementById('aboutText'),
            quoteText: document.getElementById('quoteText'),
            
            // Advanced elements
            sessionTimeout: document.getElementById('sessionTimeout'),
            autoLogout: document.getElementById('autoLogout'),
            backupFrequency: document.getElementById('backupFrequency'),
            exportData: document.getElementById('exportData'),
            clearCache: document.getElementById('clearCache'),
            
            // Save/reset
            resetCustomization: document.getElementById('resetCustomization'),
            saveCustomization: document.getElementById('saveCustomization'),
            
            // Other elements
            recentPlays: document.getElementById('recentPlays'),
            notification: document.getElementById('notification'),
            currentYear: document.getElementById('currentYear'),
            backgroundOverlay: document.getElementById('backgroundOverlay'),
            aboutContent: document.getElementById('aboutContent'),
            quoteContent: document.getElementById('quoteContent'),
            footerSiteTitle: document.getElementById('footerSiteTitle'),
            adminStatus: document.getElementById('adminStatus'),
            logoIcon: document.getElementById('logoIcon'),
            siteTitle: document.getElementById('siteTitle'),
            siteTagline: document.getElementById('siteTagline')
        };
        
        // ==================== INITIALIZATION ====================
        function init() {
            // Set current year
            elements.currentYear.textContent = new Date().getFullYear();
            
            // Initialize WaveSurfer
            initWaveSurfer();
            
            // Load saved theme
            loadTheme();
            
            // Check for existing admin session
            checkAdminSession();
            
            // Load songs from localStorage
            loadSongs();
            
            // Load recent plays
            loadRecentPlays();
            
            // Set up event listeners
            setupEventListeners();
            
            // Apply theme
            applyTheme();
            
            // Update stats
            updateStats();
        }
        
        // ==================== WAVESURFER INIT ====================
        function initWaveSurfer() {
            wavesurfer = WaveSurfer.create({
                container: '#waveform',
                waveColor: 'rgba(255, 255, 255, 0.2)',
                progressColor: currentTheme.accentPrimary,
                cursorColor: 'transparent',
                barWidth: 3,
                barRadius: 3,
                cursorWidth: 1,
                height: 150,
                barGap: 3,
                responsive: true,
                backend: 'WebAudio'
            });
            
            wavesurfer.on('ready', function() {
                elements.totalTime.textContent = formatTime(wavesurfer.getDuration());
                elements.playBtn.disabled = false;
            });
            
            wavesurfer.on('audioprocess', function() {
                elements.currentTime.textContent = formatTime(wavesurfer.getCurrentTime());
            });
            
            wavesurfer.on('finish', function() {
                elements.playIcon.className = 'fas fa-play';
                playNextSong();
            });
            
            wavesurfer.on('error', function(error) {
                showNotification('Error loading audio file', 'error');
                console.error('WaveSurfer error:', error);
            });
            
            // Set default volume
            wavesurfer.setVolume(currentTheme.defaultVolume / 100);
            elements.volumeSlider.value = currentTheme.defaultVolume;
        }
        
        // ==================== THEME MANAGEMENT ====================
        function loadTheme() {
            const savedTheme = localStorage.getItem('lunarTunesTheme');
            if (savedTheme) {
                currentTheme = JSON.parse(savedTheme);
            } else {
                currentTheme = {...DEFAULT_THEME};
            }
            
            // Update customization panel inputs
            updateCustomizationInputs();
        }
        
        function saveTheme() {
            localStorage.setItem('lunarTunesTheme', JSON.stringify(currentTheme));
        }
        
        function applyTheme() {
            const root = document.documentElement;
            
            // Apply CSS variables
            root.style.setProperty('--bg-primary', currentTheme.bgPrimary);
            root.style.setProperty('--bg-secondary', currentTheme.bgSecondary);
            root.style.setProperty('--panel-primary', currentTheme.panelPrimary);
            root.style.setProperty('--panel-secondary', currentTheme.panelSecondary);
            root.style.setProperty('--text-primary', currentTheme.textPrimary);
            root.style.setProperty('--text-secondary', currentTheme.textSecondary);
            root.style.setProperty('--accent-primary', currentTheme.accentPrimary);
            root.style.setProperty('--accent-secondary', currentTheme.accentSecondary);
            root.style.setProperty('--accent-tertiary', currentTheme.accentTertiary);
            root.style.setProperty('--border-radius', currentTheme.borderRadius);
            root.style.setProperty('--font-primary', currentTheme.fontPrimary);
            root.style.setProperty('--font-heading', currentTheme.fontHeading);
            root.style.setProperty('--logo-gradient', currentTheme.logoGradient);
            
            // Apply background image
            if (currentTheme.bgImage) {
                elements.backgroundOverlay.style.backgroundImage = `url('${currentTheme.bgImage}')`;
                elements.backgroundOverlay.style.opacity = (currentTheme.bgOpacity / 100);
            } else {
                elements.backgroundOverlay.style.backgroundImage = 'none';
                elements.backgroundOverlay.style.opacity = '0.1';
            }
            
            // Apply logo icon
            elements.logoIcon.className = `fas ${currentTheme.logoIcon}`;
            
            // Apply site title and tagline
            elements.siteTitle.textContent = currentTheme.siteTitle;
            elements.siteTagline.textContent = currentTheme.siteTagline;
            elements.footerSiteTitle.textContent = currentTheme.siteTitle;
            
            // Apply about content
            elements.aboutContent.textContent = currentTheme.aboutText;
            elements.quoteContent.textContent = currentTheme.quoteText;
            
            // Apply volume
            if (wavesurfer) {
                wavesurfer.setVolume(currentTheme.defaultVolume / 100);
                wavesurfer.setOptions({
                    progressColor: currentTheme.accentPrimary
                });
            }
            
            // Update UI colors
            document.querySelectorAll('.admin-toggle').forEach(btn => {
                btn.style.background = currentTheme.logoGradient;
            });
        }
        
        function updateCustomizationInputs() {
            elements.bgImage.value = currentTheme.bgImage || '';
            elements.bgOpacity.value = currentTheme.bgOpacity || 10;
            elements.bgOpacityValue.textContent = `${currentTheme.bgOpacity}%`;
            elements.logoIconSelect.value = currentTheme.logoIcon || 'fa-moon';
            elements.primaryColor.value = currentTheme.accentPrimary;
            elements.secondaryColor.value = currentTheme.accentSecondary;
            elements.textPrimaryColor.value = currentTheme.textPrimary;
            elements.panelColor.value = currentTheme.panelPrimary;
            elements.siteTitleInput.value = currentTheme.siteTitle;
            elements.siteTaglineInput.value = currentTheme.siteTagline;
            elements.aboutText.value = currentTheme.aboutText;
            elements.quoteText.value = currentTheme.quoteText;
            elements.defaultVolume.value = currentTheme.defaultVolume;
            elements.volumeValue.textContent = `${currentTheme.defaultVolume}%`;
            elements.waveformColor.value = currentTheme.accentPrimary;
            elements.sessionTimeout.value = currentTheme.sessionTimeout;
            elements.autoLogout.value = currentTheme.autoLogout;
            elements.backupFrequency.value = currentTheme.backupFrequency;
        }
        
        // ==================== SONG MANAGEMENT ====================
        function loadSongs() {
            const savedSongs = localStorage.getItem('lunarTunesSongs');
            if (savedSongs) {
                songs = JSON.parse(savedSongs);
                renderSongList();
            } else {
                songs = [];
                renderSongList();
            }
        }
        
        function saveSongs() {
            localStorage.setItem('lunarTunesSongs', JSON.stringify(songs));
            updateStats();
        }
        
        function renderSongList() {
            elements.songList.innerHTML = '';
            
            if (songs.length === 0) {
                const emptyElement = document.createElement('div');
                emptyElement.className = 'song-item';
                emptyElement.innerHTML = `
                    <div class="song-icon">
                        <i class="fas fa-music"></i>
                    </div>
                    <div class="song-info">
                        <h4>No songs available</h4>
                        <p>Upload music to get started</p>
                    </div>
                `;
                elements.songList.appendChild(emptyElement);
                return;
            }
            
            songs.forEach((song, index) => {
                const songElement = document.createElement('div');
                songElement.className = `song-item ${index === currentSongIndex ? 'active' : ''}`;
                songElement.innerHTML = `
                    <div class="song-icon" style="background: ${song.coverColor || 'linear-gradient(135deg, #5d8aff, #8a7dff)'}">
                        <i class="fas ${song.icon || 'fa-music'}"></i>
                    </div>
                    <div class="song-info">
                        <h4>${song.title}</h4>
                        <p>${song.artist || 'Unknown Artist'}${song.album ? ` • ${song.album}` : ''}</p>
                    </div>
                    <div class="song-actions">
                        <button class="favorite-btn ${song.favorite ? 'active' : ''}" 
                                onclick="toggleFavorite(${index})">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="song-date">${formatDate(song.date)}</div>
                `;
                
                songElement.addEventListener('click', (e) => {
                    if (!e.target.closest('.favorite-btn')) {
                        playSong(index);
                    }
                });
                
                elements.songList.appendChild(songElement);
            });
            
            // Enable player controls if songs exist
            elements.prevBtn.disabled = songs.length === 0;
            elements.nextBtn.disabled = songs.length === 0;
        }
        
        function playSong(index) {
            if (index < 0 || index >= songs.length) return;
            
            const song = songs[index];
            currentSongIndex = index;
            
            // Update UI
            elements.currentSongTitle.textContent = song.title;
            elements.currentSongArtist.textContent = song.artist || 'Unknown Artist';
            elements.currentSongDescription.textContent = song.description || '';
            elements.lyricsContainer.textContent = song.lyrics || "No lyrics available";
            elements.songGenreTag.textContent = song.genre || 'Unknown';
            elements.songYearTag.textContent = song.year || '-';
            
            // Update cover
            if (song.coverImage) {
                elements.songCover.style.backgroundImage = `url('${song.coverImage}')`;
                elements.songCover.style.backgroundSize = 'cover';
                elements.songCover.innerHTML = '';
            } else {
                elements.songCover.style.backgroundImage = 'none';
                elements.songCover.style.background = song.coverColor || 'linear-gradient(135deg, #8a7dff, #ff7dca)';
                elements.songCover.innerHTML = `<i class="fas ${song.icon || 'fa-music'}"></i>`;
            }
            
            // Update play count
            song.plays = (song.plays || 0) + 1;
            saveSongs();
            
            // Update recent plays
            addRecentPlay(song);
            
            // Load audio
            if (song.audioUrl) {
                wavesurfer.load(song.audioUrl);
            } else {
                showNotification('Audio file not found', 'error');
            }
            
            // Update song list
            renderSongList();
            
            // Update play button
            elements.playBtn.disabled = false;
            elements.nowPlaying.textContent = 'NOW PLAYING';
        }
        
        function toggleFavorite(index) {
            songs[index].favorite = !songs[index].favorite;
            saveSongs();
            renderSongList();
        }
        
        function playNextSong() {
            if (songs.length === 0) return;
            const nextIndex = (currentSongIndex + 1) % songs.length;
            playSong(nextIndex);
        }
        
        function playPreviousSong() {
            if (songs.length === 0) return;
            const prevIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            playSong(prevIndex);
        }
        
        // ==================== RECENT PLAYS ====================
        function addRecentPlay(song) {
            let recentPlays = JSON.parse(localStorage.getItem('recentPlays') || '[]');
            
            // Remove if already exists
            recentPlays = recentPlays.filter(item => item.id !== song.id);
            
            // Add to beginning
            recentPlays.unshift({
                id: song.id,
                title: song.title,
                artist: song.artist,
                album: song.album,
                icon: song.icon,
                coverColor: song.coverColor,
                timestamp: new Date().toISOString()
            });
            
            // Keep only last 5
            recentPlays = recentPlays.slice(0, 5);
            
            localStorage.setItem('recentPlays', JSON.stringify(recentPlays));
            loadRecentPlays();
        }
        
        function loadRecentPlays() {
            const recentPlays = JSON.parse(localStorage.getItem('recentPlays') || '[]');
            elements.recentPlays.innerHTML = '';
            
            if (recentPlays.length === 0) {
                elements.recentPlays.innerHTML = `
                    <div class="recent-play-item">
                        <div class="recent-play-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <div class="recent-play-info">
                            <h4>No recent plays</h4>
                            <p>Play a song to see history</p>
                        </div>
                    </div>
                `;
                return;
            }
            
            recentPlays.forEach(play => {
                const playElement = document.createElement('div');
                playElement.className = 'recent-play-item';
                playElement.innerHTML = `
                    <div class="recent-play-icon" style="background: ${play.coverColor || 'linear-gradient(135deg, #5d8aff, #8a7dff)'}">
                        <i class="fas ${play.icon || 'fa-music'}"></i>
                    </div>
                    <div class="recent-play-info">
                        <h4>${play.title}</h4>
                        <p>${play.artist || 'Unknown Artist'}${play.album ? ` • ${play.album}` : ''}</p>
                    </div>
                    <div class="recent-play-time">${formatTimeAgo(play.timestamp)}</div>
                `;
                
                playElement.addEventListener('click', () => {
                    const songIndex = songs.findIndex(s => s.id === play.id);
                    if (songIndex !== -1) {
                        playSong(songIndex);
                    }
                });
                
                elements.recentPlays.appendChild(playElement);
            });
        }
        
        // ==================== ADMIN AUTHENTICATION ====================
        function checkAdminSession() {
            const session = localStorage.getItem('adminSession');
            if (session) {
                const { timestamp, password } = JSON.parse(session);
                if (Date.now() - timestamp < SESSION_TIMEOUT && password === ADMIN_PASSWORD) {
                    activateAdminMode();
                } else {
                    localStorage.removeItem('adminSession');
                }
            }
        }
        
        function showAuthModal() {
            elements.authModal.classList.remove('hidden');
            elements.passwordStep.classList.remove('hidden');
            elements.otpStep.classList.add('hidden');
            elements.loadingStep.classList.add('hidden');
            elements.passwordInput.value = '';
            elements.passwordInput.focus();
        }
        
        function hideAuthModal() {
            elements.authModal.classList.add('hidden');
            clearOTPTimers();
        }
        
        function showPasswordStep() {
            elements.passwordStep.classList.remove('hidden');
            elements.otpStep.classList.add('hidden');
            elements.loadingStep.classList.add('hidden');
            elements.passwordInput.focus();
        }
        
        function showOTPStep() {
            elements.passwordStep.classList.add('hidden');
            elements.otpStep.classList.remove('hidden');
            elements.loadingStep.classList.add('hidden');
            elements.otpInputs[0].focus();
            
            // Generate and send OTP
            generateAndSendOTP();
        }
        
        function showLoadingStep() {
            elements.passwordStep.classList.add('hidden');
            elements.otpStep.classList.add('hidden');
            elements.loadingStep.classList.remove('hidden');
        }
        
        function generateAndSendOTP() {
            // Generate 6-digit OTP
            generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();
            otpExpiry = Date.now() + OTP_TIMEOUT;
            
            // In a real application, you would send this OTP via SMS
            // For demo purposes, we'll log it and show an alert
            console.log(`OTP for ${ADMIN_PHONE}: ${generatedOTP}`);
            alert(`[DEMO] OTP sent to ${ADMIN_PHONE}: ${generatedOTP}\n\nIn a real application, this would be sent via SMS.`);
            
            // Start OTP timer
            startOTPTimer();
            
            // Start resend timer
            startResendTimer();
            
            // Clear OTP inputs
            elements.otpInputs.forEach(input => input.value = '');
        }
        
        function startOTPTimer() {
            clearOTPTimers();
            
            let timeLeft = OTP_TIMEOUT / 1000;
            updateOTPTimer(timeLeft);
            
            otpTimer = setInterval(() => {
                timeLeft--;
                updateOTPTimer(timeLeft);
                
                if (timeLeft <= 0) {
                    clearInterval(otpTimer);
                    showNotification('OTP expired. Please request a new one.', 'warning');
                }
            }, 1000);
        }
        
        function updateOTPTimer(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            elements.otpTimer.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        function startResendTimer() {
            let timeLeft = OTP_RESEND_DELAY / 1000;
            elements.resendOtp.disabled = true;
            elements.resendOtp.classList.add('disabled');
            elements.resendTimer.textContent = timeLeft;
            
            resendTimer = setInterval(() => {
                timeLeft--;
                elements.resendTimer.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(resendTimer);
                    elements.resendOtp.disabled = false;
                    elements.resendOtp.classList.remove('disabled');
                    elements.resendOtp.textContent = 'Resend OTP';
                }
            }, 1000);
        }
        
        function clearOTPTimers() {
            if (otpTimer) clearInterval(otpTimer);
            if (resendTimer) clearInterval(resendTimer);
        }
        
        function verifyOTP(enteredOTP) {
            if (!generatedOTP || !otpExpiry) {
                return false;
            }
            
            if (Date.now() > otpExpiry) {
                showNotification('OTP has expired', 'error');
                return false;
            }
            
            return enteredOTP === generatedOTP;
        }
        
        function activateAdminMode() {
            isAdmin = true;
            sessionStartTime = Date.now();
            
            // Update UI
            elements.uploadSection.classList.add('active');
            elements.nonAdminView.classList.add('hidden');
            elements.adminToggle.innerHTML = '<i class="fas fa-user-shield"></i> Admin Active';
            elements.adminToggle.classList.add('active');
            elements.logoutBtn.style.display = 'flex';
            elements.customizeToggle.style.display = 'flex';
            elements.adminStats.style.display = 'grid';
            elements.adminStatus.textContent = '[Admin Mode]';
            
            // Start session timer
            clearTimeout(sessionTimer);
            sessionTimer = setTimeout(() => {
                showNotification('Admin session expired due to inactivity', 'warning');
                deactivateAdminMode();
            }, currentTheme.sessionTimeout * 60 * 1000);
            
            // Start session time counter
            startSessionTimer();
            
            // Save session
            localStorage.setItem('adminSession', JSON.stringify({
                timestamp: Date.now(),
                password: ADMIN_PASSWORD
            }));
            
            showNotification('Admin mode activated successfully', 'success');
            updateStats();
        }
        
        function deactivateAdminMode() {
            isAdmin = false;
            
            // Update UI
            elements.uploadSection.classList.remove('active');
            elements.nonAdminView.classList.remove('hidden');
            elements.adminToggle.innerHTML = '<i class="fas fa-user-shield"></i> Admin Access';
            elements.adminToggle.classList.remove('active');
            elements.logoutBtn.style.display = 'none';
            elements.customizeToggle.style.display = 'none';
            elements.customizationPanel.classList.remove('active');
            elements.adminStats.style.display = 'none';
            elements.adminStatus.textContent = '[User Mode]';
            
            clearTimeout(sessionTimer);
            clearInterval(sessionInterval);
            localStorage.removeItem('adminSession');
            
            showNotification('Admin mode deactivated', 'info');
        }
        
        function startSessionTimer() {
            clearInterval(sessionInterval);
            
            sessionInterval = setInterval(() => {
                if (!isAdmin || !sessionStartTime) return;
                
                const elapsed = Date.now() - sessionStartTime;
                const mins = Math.floor(elapsed / 60000);
                const secs = Math.floor((elapsed % 60000) / 1000);
                elements.adminTime.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // ==================== UPLOAD FUNCTIONALITY ====================
        function uploadSong(event) {
            event.preventDefault();
            
            if (!isAdmin) {
                showNotification('Admin access required to upload', 'error');
                return;
            }
            
            const file = elements.songFile.files[0];
            const title = elements.songTitle.value;
            const artist = elements.songArtist.value;
            const album = elements.songAlbum.value;
            const year = elements.songYear.value;
            const genre = elements.songGenre.value;
            const description = elements.songDescription.value;
            const lyrics = elements.songLyrics.value;
            const coverImage = elements.songCoverImage.value;
            
            if (!file || !title || !artist) {
                showNotification('Please fill in all required fields', 'warning');
                return;
            }
            
            // Validate file type
            if (!file.type.startsWith('audio/')) {
                showNotification('Please select an audio file', 'error');
                return;
            }
            
            // Create object URL for audio
            const audioUrl = URL.createObjectURL(file);
            
            // Create new song object
            const newSong = {
                id: Date.now(),
                title: title,
                artist: artist,
                album: album,
                year: year,
                genre: genre,
                description: description,
                lyrics: lyrics,
                date: new Date().toISOString(),
                icon: getRandomIcon(),
                coverColor: getRandomGradient(),
                coverImage: coverImage || '',
                audioUrl: audioUrl,
                fileName: file.name,
                fileSize: formatFileSize(file.size),
                plays: 0,
                favorite: false
            };
            
            // Add to songs array
            songs.unshift(newSong);
            saveSongs();
            
            // Update UI
            renderSongList();
            
            // Auto-play the new song
            playSong(0);
            
            // Reset form
            elements.uploadForm.reset();
            
            showNotification(`"${title}" uploaded successfully!`, 'success');
        }
        
        // ==================== STATS & ANALYTICS ====================
        function updateStats() {
            // Song count
            elements.songCount.textContent = songs.length;
            
            // Total plays
            const totalPlays = songs.reduce((total, song) => total + (song.plays || 0), 0);
            elements.playCount.textContent = totalPlays;
            
            // Update session time if admin
            if (isAdmin && sessionStartTime) {
                const elapsed = Date.now() - sessionStartTime;
                const mins = Math.floor(elapsed / 60000);
                const secs = Math.floor((elapsed % 60000) / 1000);
                elements.adminTime.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
        }
        
        // ==================== HELPER FUNCTIONS ====================
        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }
        
        function formatTimeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins}m ago`;
            if (diffHours < 24) return `${diffHours}h ago`;
            if (diffDays < 7) return `${diffDays}d ago`;
            return formatDate(dateString);
        }
        
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / 1048576).toFixed(1) + ' MB';
        }
        
        function getRandomIcon() {
            const icons = ['fa-music', 'fa-headphones', 'fa-record-vinyl', 'fa-guitar', 'fa-drum', 'fa-microphone-alt', 'fa-moon', 'fa-star', 'fa-satellite', 'fa-rocket'];
            return icons[Math.floor(Math.random() * icons.length)];
        }
        
        function getRandomGradient() {
            const gradients = [
                'linear-gradient(135deg, #8a7dff, #5d8aff)',
                'linear-gradient(135deg, #5d8aff, #ff7dca)',
                'linear-gradient(135deg, #ff7dca, #7dff8a)',
                'linear-gradient(135deg, #7dff8a, #ffb07d)',
                'linear-gradient(135deg, #ffb07d, #7de2ff)',
                'linear-gradient(135deg, #7de2ff, #d47dff)'
            ];
            return gradients[Math.floor(Math.random() * gradients.length)];
        }
        
        function showNotification(message, type = 'info') {
            elements.notification.textContent = message;
            elements.notification.className = 'notification';
            elements.notification.classList.add(type);
            
            setTimeout(() => {
                elements.notification.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                elements.notification.classList.remove('show');
                setTimeout(() => {
                    elements.notification.classList.remove(type);
                }, 300);
            }, 3000);
        }
        
        // ==================== EVENT LISTENERS ====================
        function setupEventListeners() {
            // Play button
            elements.playBtn.addEventListener('click', () => {
                if (wavesurfer.isPlaying()) {
                    wavesurfer.pause();
                    elements.playIcon.className = 'fas fa-play';
                } else {
                    wavesurfer.play();
                    elements.playIcon.className = 'fas fa-pause';
                }
            });
            
            // Previous button
            elements.prevBtn.addEventListener('click', playPreviousSong);
            
            // Next button
            elements.nextBtn.addEventListener('click', playNextSong);
            
            // Volume slider
            elements.volumeSlider.addEventListener('input', (e) => {
                wavesurfer.setVolume(e.target.value / 100);
            });
            
            // Admin toggle
            elements.adminToggle.addEventListener('click', () => {
                if (isAdmin) {
                    deactivateAdminMode();
                } else {
                    showAuthModal();
                }
            });
            
            // Customize toggle
            elements.customizeToggle.addEventListener('click', () => {
                if (!isAdmin) {
                    showNotification('Admin access required for customization', 'error');
                    return;
                }
                elements.customizationPanel.classList.add('active');
            });
            
            // Close customization panel
            elements.closeCustomization.addEventListener('click', () => {
                elements.customizationPanel.classList.remove('active');
            });
            
            // Logout button
            elements.logoutBtn.addEventListener('click', deactivateAdminMode);
            
            // Upload form
            elements.uploadForm.addEventListener('submit', uploadSong);
            
            // Auth modal
            elements.submitPassword.addEventListener('click', () => {
                const password = elements.passwordInput.value;
                if (password === ADMIN_PASSWORD) {
                    showOTPStep();
                } else {
                    showNotification('Incorrect password', 'error');
                    elements.passwordInput.value = '';
                    elements.passwordInput.focus();
                }
            });
            
            elements.cancelAuth.addEventListener('click', hideAuthModal);
            elements.backToPassword.addEventListener('click', showPasswordStep);
            
            elements.passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    elements.submitPassword.click();
                }
            });
            
            // OTP inputs
            elements.otpInputs.forEach((input, index) => {
                input.addEventListener('input', (e) => {
                    const value = e.target.value;
                    
                    // Only allow numbers
                    if (!/^\d*$/.test(value)) {
                        e.target.value = '';
                        return;
                    }
                    
                    // Move to next input if current is filled
                    if (value.length === 1 && index < elements.otpInputs.length - 1) {
                        elements.otpInputs[index + 1].focus();
                    }
                    
                    // Move to previous if backspace pressed and input is empty
                    if (value.length === 0 && e.inputType === 'deleteContentBackward' && index > 0) {
                        elements.otpInputs[index - 1].focus();
                    }
                });
                
                input.addEventListener('keydown', (e) => {
                    // Handle backspace
                    if (e.key === 'Backspace' && input.value === '' && index > 0) {
                        elements.otpInputs[index - 1].focus();
                    }
                    
                    // Handle arrow keys
                    if (e.key === 'ArrowLeft' && index > 0) {
                        elements.otpInputs[index - 1].focus();
                    }
                    if (e.key === 'ArrowRight' && index < elements.otpInputs.length - 1) {
                        elements.otpInputs[index + 1].focus();
                    }
                });
                
                // Prevent paste on individual inputs
                input.addEventListener('paste', (e) => {
                    e.preventDefault();
                });
            });
            
            // Handle paste on OTP container
            document.addEventListener('paste', (e) => {
                if (e.target.classList.contains('otp-input')) {
                    e.preventDefault();
                    const pasteData = e.clipboardData.getData('text').trim();
                    if (/^\d{6}$/.test(pasteData)) {
                        pasteData.split('').forEach((digit, index) => {
                            if (elements.otpInputs[index]) {
                                elements.otpInputs[index].value = digit;
                            }
                        });
                        elements.otpInputs[5].focus();
                    }
                }
            });
            
            // Submit OTP
            elements.submitOtp.addEventListener('click', () => {
                const enteredOTP = Array.from(elements.otpInputs).map(input => input.value).join('');
                
                if (enteredOTP.length !== 6) {
                    showNotification('Please enter a 6-digit OTP', 'warning');
                    return;
                }
                
                if (verifyOTP(enteredOTP)) {
                    showLoadingStep();
                    setTimeout(() => {
                        hideAuthModal();
                        activateAdminMode();
                    }, 1000);
                } else {
                    showNotification('Invalid OTP. Please try again.', 'error');
                    elements.otpInputs.forEach(input => input.value = '');
                    elements.otpInputs[0].focus();
                }
            });
            
            // Resend OTP
            elements.resendOtp.addEventListener('click', () => {
                if (elements.resendOtp.disabled) return;
                generateAndSendOTP();
                showNotification('New OTP sent successfully', 'success');
            });
            
            // Customization tabs
            elements.tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.dataset.tab;
                    
                    // Update active tab button
                    elements.tabBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Show active tab content
                    elements.tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === tabId) {
                            content.classList.add('active');
                        }
                    });
                });
            });
            
            // Theme presets
            elements.themePresets.forEach(preset => {
                preset.addEventListener('click', () => {
                    const presetName = preset.dataset.preset;
                    if (THEME_PRESETS[presetName]) {
                        currentTheme = { ...currentTheme, ...THEME_PRESETS[presetName] };
                        updateCustomizationInputs();
                        applyTheme();
                        showNotification(`"${presetName.charAt(0).toUpperCase() + presetName.slice(1)}" theme applied`, 'success');
                    }
                });
            });
            
            // Customization controls with live updates
            elements.bgOpacity.addEventListener('input', (e) => {
                elements.bgOpacityValue.textContent = `${e.target.value}%`;
            });
            
            elements.defaultVolume.addEventListener('input', (e) => {
                elements.volumeValue.textContent = `${e.target.value}%`;
            });
            
            elements.primaryColor.addEventListener('input', (e) => {
                // Update gradient preview
                currentTheme.logoGradient = `linear-gradient(to right, ${e.target.value}, ${elements.secondaryColor.value})`;
                applyTheme();
            });
            
            elements.secondaryColor.addEventListener('input', (e) => {
                // Update gradient preview
                currentTheme.logoGradient = `linear-gradient(to right, ${elements.primaryColor.value}, ${e.target.value})`;
                applyTheme();
            });
            
            // Save customization
            elements.saveCustomization.addEventListener('click', () => {
                if (!isAdmin) {
                    showNotification('Admin access required for customization', 'error');
                    return;
                }
                
                // Update theme from inputs
                currentTheme.bgImage = elements.bgImage.value;
                currentTheme.bgOpacity = parseInt(elements.bgOpacity.value);
                currentTheme.logoIcon = elements.logoIconSelect.value;
                currentTheme.accentPrimary = elements.primaryColor.value;
                currentTheme.accentSecondary = elements.secondaryColor.value;
                currentTheme.textPrimary = elements.textPrimaryColor.value;
                currentTheme.panelPrimary = elements.panelColor.value;
                currentTheme.siteTitle = elements.siteTitleInput.value;
                currentTheme.siteTagline = elements.siteTaglineInput.value;
                currentTheme.aboutText = elements.aboutText.value;
                currentTheme.quoteText = elements.quoteText.value;
                currentTheme.defaultVolume = parseInt(elements.defaultVolume.value);
                currentTheme.sessionTimeout = parseInt(elements.sessionTimeout.value);
                currentTheme.autoLogout = elements.autoLogout.value === 'true';
                currentTheme.backupFrequency = elements.backupFrequency.value;
                
                // Update logo gradient
                currentTheme.logoGradient = `linear-gradient(to right, ${elements.primaryColor.value}, ${elements.secondaryColor.value})`;
                
                // Save and apply theme
                saveTheme();
                applyTheme();
                
                // Update session timeout if admin is active
                if (isAdmin) {
                    clearTimeout(sessionTimer);
                    sessionTimer = setTimeout(() => {
                        showNotification('Admin session expired due to inactivity', 'warning');
                        deactivateAdminMode();
                    }, currentTheme.sessionTimeout * 60 * 1000);
                }
                
                showNotification('Customizations saved successfully!', 'success');
            });
            
            elements.resetCustomization.addEventListener('click', () => {
                if (!isAdmin) {
                    showNotification('Admin access required for customization', 'error');
                    return;
                }
                
                if (confirm('Are you sure you want to reset all customizations to default? This action cannot be undone.')) {
                    currentTheme = {...DEFAULT_THEME};
                    updateCustomizationInputs();
                    saveTheme();
                    applyTheme();
                    showNotification('Customizations reset to default', 'info');
                }
            });
            
            // Export data
            elements.exportData.addEventListener('click', () => {
                if (!isAdmin) {
                    showNotification('Admin access required', 'error');
                    return;
                }
                
                const data = {
                    songs: songs,
                    theme: currentTheme,
                    recentPlays: JSON.parse(localStorage.getItem('recentPlays') || '[]'),
                    exportedAt: new Date().toISOString()
                };
                
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `lunar-tunes-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('Data exported successfully', 'success');
            });
            
            // Clear cache
            elements.clearCache.addEventListener('click', () => {
                if (!isAdmin) {
                    showNotification('Admin access required', 'error');
                    return;
                }
                
                if (confirm('Are you sure you want to clear all cache? This will remove temporary files but keep your data.')) {
                    // Clear object URLs
                    songs.forEach(song => {
                        if (song.audioUrl && song.audioUrl.startsWith('blob:')) {
                            URL.revokeObjectURL(song.audioUrl);
                        }
                    });
                    
                    // Clear session storage
                    sessionStorage.clear();
                    
                    showNotification('Cache cleared successfully', 'success');
                }
            });
            
            // Prevent file upload for non-admins
            elements.songFile.addEventListener('click', (e) => {
                if (!isAdmin) {
                    e.preventDefault();
                    showNotification('Admin access required to upload files', 'warning');
                }
            });
            
            // Close customization panel when clicking outside
            document.addEventListener('click', (e) => {
                if (elements.customizationPanel.classList.contains('active') && 
                    !elements.customizationPanel.contains(e.target) && 
                    !elements.customizeToggle.contains(e.target)) {
                    elements.customizationPanel.classList.remove('active');
                }
            });
            
            // Auto-logout on inactivity
            let inactivityTimer;
            function resetInactivityTimer() {
                clearTimeout(inactivityTimer);
                if (isAdmin && currentTheme.autoLogout) {
                    inactivityTimer = setTimeout(() => {
                        showNotification('Admin session expired due to inactivity', 'warning');
                        deactivateAdminMode();
                    }, 5 * 60 * 1000); // 5 minutes of inactivity
                }
            }
            
            // Reset timer on user activity
            ['click', 'mousemove', 'keypress', 'scroll'].forEach(event => {
                document.addEventListener(event, resetInactivityTimer);
            });
            
            resetInactivityTimer();
        }
        
        // ==================== INITIALIZE ====================
        document.addEventListener('DOMContentLoaded', init);
        
        // Make functions available globally for onclick handlers
        window.toggleFavorite = toggleFavorite;
        window.playSong = playSong;
    </script>
</body>
</html>